
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; Spyder v0.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Spyder v0.1 documentation" href="index.html" />
    <link rel="next" title="Crawler Design" href="crawler-design.html" />
    <link rel="prev" title="Release Notes" href="release-notes.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="crawler-design.html" title="Crawler Design"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="release-notes.html" title="Release Notes"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Spyder v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<span id="secgettingstarted"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p><em>Spyder</em> is just a library for creating web crawlers. In order to really crawl
content, you first have to create a <em>Spyder</em> skeleton:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir my-crawler <span class="o">&amp;&amp;</span> <span class="nb">cd </span>my-crawler
<span class="nv">$ </span>spyder start
<span class="nv">$ </span>ls
log logging.conf master.py settings.py sink.py spyder-ctrl.py
</pre></div>
</div>
<p>This will copy the skeleton into <cite>my-crawler</cite>. The main file is <cite>settings.py</cite>.
In it, you can configure the logging level for <strong>Masters</strong> and <strong>Workers</strong> and
define the <strong>crawl scope</strong>. In <cite>master.py</cite> you should manipulate the starting
URLs and add your specific <cite>sink.py</cite> into the <strong>Frontier</strong>. <cite>spyder-ctrl.py</cite> is
just a small control script that helps you start the <strong>Log Sink</strong>, <strong>Master</strong> and
<strong>Worker</strong>.</p>
<p>In the skeleton everything is setup as if you would want to crawl Sailing
related pages from <strong>DMOZ</strong>. That should give you a starting point for your own
crawler.</p>
<p>So, when you wrote your sink and have everything configured right, it&#8217;s time to
start crawling. First, on one of your nodes you start the logsink:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>spyder-ctrl.py logsink &amp;
</pre></div>
</div>
<p>Again on one node (the same as the logsink, e.g.) you start the <strong>Master</strong>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>spyder-ctrl.py master &amp;
</pre></div>
</div>
<p>Finally you can start as many <strong>Workers</strong> as you want:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>spyder-ctrl.py worker &amp;
<span class="nv">$ </span>spyder-ctrl.py worker &amp;
<span class="nv">$ </span>spyder-ctrl.py worker &amp;
</pre></div>
</div>
<p>Here we started 3 workers since it is a powerful node having a quad core CPU.</p>
<div class="section" id="scaling-the-crawl">
<h2>Scaling the Crawl<a class="headerlink" href="#scaling-the-crawl" title="Permalink to this headline">¶</a></h2>
<p>With the default settings it is not possible to start workers on different
nodes. Most of the time one node is powerful enough to crawl quite an amount of
data. But there are times when you simply want to crawl using <em>many</em> nodes. This
can be done by configuring the <strong>ZeroMQ</strong> transports to something like</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ZEROMQ_MASTER_PUSH</span> <span class="o">=</span> <span class="s">&quot;tcp://NodeA:5005&quot;</span>
<span class="n">ZEROMQ_MASTER_SUB</span> <span class="o">=</span> <span class="s">&quot;tcp://NodeA:5007&quot;</span>

<span class="n">ZEROMQ_MGMT_MASTER</span> <span class="o">=</span> <span class="s">&quot;tcp://NodeA:5008&quot;</span>
<span class="n">ZEROMQ_MGMT_WORKER</span> <span class="o">=</span> <span class="s">&quot;tcp://NodeA:5009&quot;</span>

<span class="n">ZEROMQ_LOGGING</span> <span class="o">=</span> <span class="s">&quot;tcp://NodeA:5010&quot;</span>
</pre></div>
</div>
<p>Basically we have setup a 2 node crawl cluster. <strong>NodeA</strong> acts as logging sink
and controls the crawl via the <strong>Master</strong>. <strong>NodeB</strong> Is a pure <strong>Worker</strong> node.
Only the <strong>Master</strong> actually <em>binds</em> <strong>ZeroMQ</strong> sockets, the <strong>Worker</strong> always
<em>connect</em> to them so the <strong>Master</strong> does not have to know where the
<strong>Workers</strong> are really running.</p>
</div>
<div class="section" id="from-here">
<h2>From here<a class="headerlink" href="#from-here" title="Permalink to this headline">¶</a></h2>
<p>There is plenty of room for improvement and development ahead. Everything will
be handled by Github tickets from now on and, if there is interest, we may setup
a Google Group.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#scaling-the-crawl">Scaling the Crawl</a></li>
<li><a class="reference internal" href="#from-here">From here</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="release-notes.html"
                        title="previous chapter">Release Notes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="crawler-design.html"
                        title="next chapter">Crawler Design</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getting-started.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="crawler-design.html" title="Crawler Design"
             >next</a> |</li>
        <li class="right" >
          <a href="release-notes.html" title="Release Notes"
             >previous</a> |</li>
        <li><a href="index.html">Spyder v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Daniel Truemper.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.6.
    </div>
  </body>
</html>